---
description: 'Web Accessibility Guidelines following WCAG 2.2 Level AA standards'
applyTo: '**/*.tsx, **/*.ts, **/*.jsx, **/*.html, **/*.css'
---

# Web Accessibility (a11y) Guidelines

> These instructions ensure compliance with WCAG 2.2 Level AA standards and create inclusive web experiences for all users.

## Core Principles (WCAG)

### 1. Perceivable
Information and user interface components must be presentable to users in ways they can perceive.

### 2. Operable
User interface components and navigation must be operable.

### 3. Understandable
Information and the operation of user interface must be understandable.

### 4. Robust
Content must be robust enough that it can be interpreted by a wide variety of user agents, including assistive technologies.

---

## Keyboard Navigation

### Requirements

- **All interactive elements** must be keyboard accessible
- **Tab order** must be logical and follow visual flow
- **Focus indicators** must be visible for all interactive elements
- **Keyboard shortcuts** must not conflict with assistive technology
- **Focus traps** must be implemented for modals/dialogs

### Implementation

```tsx
// ✅ Good: Keyboard accessible button
<button onClick={handleClick}>Click me</button>

// ❌ Bad: Non-semantic element without keyboard support
<div onClick={handleClick}>Click me</div>

// ✅ Good: If div is necessary, add keyboard support
<div
  role="button"
  tabIndex={0}
  onClick={handleClick}
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      handleClick();
    }
  }}
>
  Click me
</div>

// ✅ Good: Modal with focus trap
import FocusTrap from 'focus-trap-react';

<FocusTrap active={isOpen}>
  <dialog open={isOpen}>
    <h2>Modal Title</h2>
    <button onClick={onClose}>Close</button>
  </dialog>
</FocusTrap>
```

### Tab Order

```tsx
// ✅ Use semantic HTML for natural tab order
<nav>
  <a href="/home">Home</a>
  <a href="/about">About</a>
  <a href="/contact">Contact</a>
</nav>

// ❌ Avoid custom tabIndex values unless necessary
<div tabIndex="3">Third</div>
<div tabIndex="1">First</div>
<div tabIndex="2">Second</div>
```

### Skip Links

```tsx
// ✅ Provide skip links for keyboard users
<a href="#main-content" className="skip-link">
  Skip to main content
</a>

<main id="main-content">
  {/* Main content */}
</main>

/* CSS */
.skip-link {
  position: absolute;
  left: -9999px;
  z-index: 999;
}

.skip-link:focus {
  left: 0;
  top: 0;
  background: #000;
  color: #fff;
  padding: 0.5rem;
}
```

---

## Screen Readers

### Semantic HTML

```tsx
// ✅ Use semantic HTML elements
<header>
  <nav>
    <ul>
      <li><a href="/home">Home</a></li>
    </ul>
  </nav>
</header>

<main>
  <article>
    <h1>Article Title</h1>
    <p>Article content...</p>
  </article>
</main>

<footer>
  <p>&copy; 2024 Company Name</p>
</footer>

// ❌ Avoid div soup
<div class="header">
  <div class="nav">
    <div class="nav-item">Home</div>
  </div>
</div>
```

### ARIA Labels and Descriptions

```tsx
// ✅ Label form inputs properly
<label htmlFor="email">Email address</label>
<input id="email" type="email" />

// ✅ Use aria-label for icon buttons
<button aria-label="Close dialog">
  <XIcon />
</button>

// ✅ Use aria-describedby for additional context
<input
  id="password"
  type="password"
  aria-describedby="password-help"
/>
<span id="password-help">
  Must be at least 8 characters
</span>

// ✅ Use aria-live for dynamic content
<div aria-live="polite" aria-atomic="true">
  {statusMessage}
</div>

// ✅ Use aria-expanded for collapsible content
<button
  aria-expanded={isOpen}
  aria-controls="menu-content"
  onClick={toggle}
>
  Menu
</button>
<div id="menu-content" hidden={!isOpen}>
  {/* Menu items */}
</div>
```

### Hiding Content

```tsx
// ✅ Visually hide but keep for screen readers
<span className="sr-only">
  This text is only for screen readers
</span>

/* CSS */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

// ✅ Hide from everyone
<div aria-hidden="true">
  Decorative content
</div>
```

---

## Visual Design

### Color Contrast

**WCAG 2.2 Level AA Requirements:**
- Normal text (< 18pt): 4.5:1
- Large text (≥ 18pt or ≥ 14pt bold): 3:1
- UI components and graphics: 3:1

```css
/* ✅ Good: High contrast */
.text {
  color: #000000; /* Black */
  background-color: #ffffff; /* White */
  /* Contrast ratio: 21:1 */
}

/* ✅ Good: Meets AA for large text */
.heading {
  font-size: 18pt;
  color: #666666;
  background-color: #ffffff;
  /* Contrast ratio: 5.74:1 */
}

/* ❌ Bad: Insufficient contrast */
.low-contrast {
  color: #999999;
  background-color: #ffffff;
  /* Contrast ratio: 2.85:1 - FAILS */
}
```

### Color Alone

```tsx
// ❌ Don't rely on color alone
<button style={{ color: 'red' }}>
  Error
</button>

// ✅ Use color + icon/text
<button className="error-button">
  <AlertIcon aria-hidden="true" />
  Error
</button>

// ✅ Use patterns for charts
<BarChart
  data={data}
  patterns={['solid', 'striped', 'dotted']}
/>
```

### Focus Indicators

```css
/* ✅ Visible focus indicator */
button:focus-visible {
  outline: 2px solid #0066cc;
  outline-offset: 2px;
}

/* ❌ Don't remove focus styles without replacement */
button:focus {
  outline: none; /* AVOID THIS */
}
```

### Text Spacing

Allow user overrides for:
- Line height: At least 1.5x font size
- Paragraph spacing: At least 2x font size
- Letter spacing: At least 0.12x font size
- Word spacing: At least 0.16x font size

```css
/* ✅ Support text spacing */
p {
  line-height: 1.5;
  margin-bottom: 2em;
}

/* Ensure content doesn't break when users increase spacing */
.container {
  overflow: visible;
  white-space: normal;
}
```

### Responsive Design

```css
/* ✅ Support 400% zoom without horizontal scroll */
@media (max-width: 1280px) {
  .content {
    max-width: 100%;
    overflow-wrap: break-word;
  }
}

/* ✅ Support text resize up to 200% */
html {
  font-size: 16px; /* Use relative units */
}

body {
  font-size: 1rem; /* Not px */
}
```

---

## Forms

### Labels

```tsx
// ✅ Always associate labels with inputs
<label htmlFor="username">Username</label>
<input id="username" type="text" />

// ✅ Or use implicit association
<label>
  Username
  <input type="text" />
</label>

// ✅ Multiple labels (checkbox groups)
<fieldset>
  <legend>Select your interests</legend>
  <label>
    <input type="checkbox" name="interests" value="sports" />
    Sports
  </label>
  <label>
    <input type="checkbox" name="interests" value="music" />
    Music
  </label>
</fieldset>
```

### Error Handling

```tsx
// ✅ Clear, accessible error messages
<div>
  <label htmlFor="email">Email</label>
  <input
    id="email"
    type="email"
    aria-invalid={hasError}
    aria-describedby={hasError ? 'email-error' : undefined}
  />
  {hasError && (
    <span id="email-error" role="alert">
      Please enter a valid email address
    </span>
  )}
</div>

// ✅ Error summary at top of form
{errors.length > 0 && (
  <div role="alert" aria-labelledby="error-summary">
    <h2 id="error-summary">There are {errors.length} errors in this form</h2>
    <ul>
      {errors.map((error, i) => (
        <li key={i}>
          <a href={`#${error.field}`}>{error.message}</a>
        </li>
      ))}
    </ul>
  </div>
)}
```

### Required Fields

```tsx
// ✅ Indicate required fields
<label htmlFor="name">
  Name <span aria-label="required">*</span>
</label>
<input id="name" type="text" required aria-required="true" />

// ✅ Or use text
<label htmlFor="email">
  Email (required)
</label>
<input id="email" type="email" required />
```

### Input Purpose

```tsx
// ✅ Use autocomplete for common fields
<input
  type="email"
  name="email"
  autocomplete="email"
/>

<input
  type="tel"
  name="phone"
  autocomplete="tel"
/>

<input
  type="text"
  name="street"
  autocomplete="street-address"
/>
```

---

## Images

### Alternative Text

```tsx
// ✅ Informative images
<img
  src="chart.png"
  alt="Sales increased by 25% in Q4 2024"
/>

// ✅ Functional images (buttons)
<button>
  <img src="search.svg" alt="Search" />
</button>

// ✅ Decorative images
<img src="divider.svg" alt="" role="presentation" />

// ❌ Redundant alt text
<a href="/blog">
  <img src="blog.png" alt="Blog" />
  Blog
</a>

// ✅ Better
<a href="/blog">
  <img src="blog.png" alt="" />
  Blog
</a>
```

### Complex Images

```tsx
// ✅ Long description for complex graphics
<figure>
  <img
    src="complex-chart.png"
    alt="Quarterly sales data"
    aria-describedby="chart-description"
  />
  <figcaption id="chart-description">
    Sales data for Q1-Q4 2024. Q1: $100K, Q2: $150K, Q3: $175K, Q4: $200K.
    Shows 100% growth year-over-year.
  </figcaption>
</figure>
```

---

## Media

### Video

```tsx
// ✅ Provide captions and transcripts
<video controls>
  <source src="video.mp4" type="video/mp4" />
  <track
    kind="captions"
    src="captions.vtt"
    srclang="en"
    label="English"
  />
  <track
    kind="descriptions"
    src="descriptions.vtt"
    srclang="en"
    label="English descriptions"
  />
</video>

<details>
  <summary>Video transcript</summary>
  <p>Full text transcript of the video...</p>
</details>
```

### Audio

```tsx
// ✅ Provide transcripts
<audio controls>
  <source src="podcast.mp3" type="audio/mpeg" />
</audio>

<details>
  <summary>Podcast transcript</summary>
  <p>Full text transcript...</p>
</details>
```

### Auto-play

```tsx
// ✅ Provide controls to pause auto-playing media
<video autoplay muted controls>
  {/* Must be muted if autoplay */}
</video>

// ✅ Or provide pause button
{isPlaying && (
  <button onClick={pause} aria-label="Pause background video">
    Pause
  </button>
)}
```

---

## Motion and Animation

### Reduced Motion

```css
/* ✅ Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ✅ Provide alternatives to animations */
.notification {
  animation: slide-in 0.3s ease-out;
}

@media (prefers-reduced-motion: reduce) {
  .notification {
    animation: none;
    opacity: 1;
  }
}
```

### Parallax and Scrolling

```tsx
// ✅ Make parallax optional
const [reducedMotion, setReducedMotion] = useState(false);

useEffect(() => {
  const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
  setReducedMotion(mediaQuery.matches);
}, []);

return (
  <div className={reducedMotion ? 'static' : 'parallax'}>
    {/* Content */}
  </div>
);
```

---

## Dynamic Content

### Live Regions

```tsx
// ✅ Announce dynamic updates
<div aria-live="polite" aria-atomic="true">
  {statusMessage}
</div>

// ✅ Use assertive for critical updates
<div aria-live="assertive">
  {errorMessage}
</div>

// ✅ Loading states
<div role="status" aria-live="polite">
  {isLoading ? 'Loading...' : 'Content loaded'}
</div>
```

### Client-side Routing

```tsx
// ✅ Announce route changes
useEffect(() => {
  const announcement = document.createElement('div');
  announcement.setAttribute('role', 'status');
  announcement.setAttribute('aria-live', 'polite');
  announcement.textContent = `Navigated to ${pageTitle}`;
  document.body.appendChild(announcement);

  setTimeout(() => {
    document.body.removeChild(announcement);
  }, 1000);
}, [pageTitle]);

// ✅ Manage focus on route change
useEffect(() => {
  const h1 = document.querySelector('h1');
  if (h1) {
    h1.focus();
  }
}, [pathname]);
```

---

## Tables

### Data Tables

```tsx
// ✅ Proper table structure
<table>
  <caption>Quarterly sales data</caption>
  <thead>
    <tr>
      <th scope="col">Quarter</th>
      <th scope="col">Sales</th>
      <th scope="col">Growth</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">Q1</th>
      <td>$100K</td>
      <td>10%</td>
    </tr>
  </tbody>
</table>
```

### Complex Tables

```tsx
// ✅ Use headers attribute for complex relationships
<table>
  <tr>
    <th id="name">Name</th>
    <th id="math">Math</th>
    <th id="english">English</th>
  </tr>
  <tr>
    <th id="john">John</th>
    <td headers="john math">95</td>
    <td headers="john english">87</td>
  </tr>
</table>
```

---

## Testing

### Automated Testing Tools

```bash
# Install axe-core for automated testing
npm install --save-dev @axe-core/react

# Use in tests
import { axe, toHaveNoViolations } from 'jest-axe';

test('should have no accessibility violations', async () => {
  const { container } = render(<MyComponent />);
  const results = await axe(container);
  expect(results).toHaveNoViolations();
});
```

### Manual Testing Checklist

- [ ] **Keyboard Navigation**: Tab through all interactive elements
- [ ] **Screen Reader**: Test with NVDA (Windows) or VoiceOver (Mac)
- [ ] **Zoom**: Test at 200% and 400% zoom
- [ ] **Color Contrast**: Use browser DevTools or WebAIM contrast checker
- [ ] **Focus Indicators**: Verify all interactive elements have visible focus
- [ ] **Form Labels**: All inputs have associated labels
- [ ] **Error Messages**: Errors are clearly announced and associated
- [ ] **Dynamic Content**: Updates are announced to screen readers
- [ ] **Reduced Motion**: Test with prefers-reduced-motion enabled

### Browser Extensions

- **axe DevTools**: Automated accessibility testing
- **WAVE**: Visual accessibility evaluation
- **Lighthouse**: Accessibility audit in Chrome DevTools
- **Screen Reader**: NVDA (Windows), VoiceOver (Mac), JAWS

---

## Common Patterns

### Modal Dialog

```tsx
// ✅ Accessible modal
import FocusTrap from 'focus-trap-react';

function Modal({ isOpen, onClose, title, children }) {
  const titleId = useId();

  useEffect(() => {
    if (isOpen) {
      // Save last focused element
      const lastFocused = document.activeElement;
      
      return () => {
        // Restore focus on close
        lastFocused?.focus();
      };
    }
  }, [isOpen]);

  if (!isOpen) return null;

  return (
    <FocusTrap>
      <div
        role="dialog"
        aria-modal="true"
        aria-labelledby={titleId}
      >
        <h2 id={titleId}>{title}</h2>
        {children}
        <button onClick={onClose}>Close</button>
      </div>
    </FocusTrap>
  );
}
```

### Dropdown Menu

```tsx
// ✅ Accessible dropdown
function Dropdown({ label, items }) {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <div>
      <button
        aria-haspopup="true"
        aria-expanded={isOpen}
        onClick={() => setIsOpen(!isOpen)}
      >
        {label}
      </button>
      {isOpen && (
        <ul role="menu">
          {items.map((item, i) => (
            <li key={i} role="menuitem">
              <a href={item.href}>{item.label}</a>
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}
```

### Tabs

```tsx
// ✅ Accessible tabs
function Tabs({ tabs }) {
  const [activeTab, setActiveTab] = useState(0);

  return (
    <div>
      <div role="tablist">
        {tabs.map((tab, i) => (
          <button
            key={i}
            role="tab"
            aria-selected={i === activeTab}
            aria-controls={`panel-${i}`}
            id={`tab-${i}`}
            onClick={() => setActiveTab(i)}
          >
            {tab.label}
          </button>
        ))}
      </div>
      {tabs.map((tab, i) => (
        <div
          key={i}
          role="tabpanel"
          id={`panel-${i}`}
          aria-labelledby={`tab-${i}`}
          hidden={i !== activeTab}
        >
          {tab.content}
        </div>
      ))}
    </div>
  );
}
```

---

## Resources

- **WCAG 2.2**: https://www.w3.org/WAI/WCAG22/quickref/
- **ARIA Authoring Practices**: https://www.w3.org/WAI/ARIA/apg/
- **WebAIM**: https://webaim.org/
- **A11y Project**: https://www.a11yproject.com/
- **MDN Accessibility**: https://developer.mozilla.org/en-US/docs/Web/Accessibility

---

## Remember

Accessibility is:
- **Not optional**: It's a legal requirement in many jurisdictions
- **Good for everyone**: Benefits all users, not just those with disabilities
- **Easier upfront**: Building accessible from the start is easier than retrofitting
- **Testable**: Use automated tools and manual testing
- **Ongoing**: Accessibility is a continuous process, not a one-time task
