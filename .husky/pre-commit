#!/bin/sh

# ========================================
# pre-commit フック
# ========================================
# このフックはコミット前に自動的に実行され、ステージされたファイルに対して
# Biome によるフォーマットとリントチェックを行います。
#
# 【実行内容】
# 1. biome check --staged --write: ステージされたファイルのみをチェックし、自動修正
# 2. git update-index --again: 修正されたファイルを再度ステージに追加
#
# 【メリット】
# - CI に到達する前にフォーマット・リントエラーを検出
# - --staged オプションにより、変更したファイルのみをチェック（高速）
# - --write オプションにより、自動修正で開発者の負担を軽減

# Biome でステージされたファイルをチェック・自動修正
pnpm biome check --staged --write

# 修正されたファイルを再度ステージに追加
# これにより、自動修正された内容がコミットに含まれる
git update-index --again
